---
export interface Props {
  name: string;
  level: 'Beginner' | 'Intermediate' | 'Advanced' | 'Expert';
  color: string;
  index?: number;
}

const { name, level, color, index = 0 } = Astro.props;

// Color mapping for different skill categories
const colorClasses = {
  blue: 'bg-blue-100 text-blue-800 border-blue-200 hover:bg-blue-200 hover:border-blue-300 dark:bg-blue-900 dark:bg-opacity-30 dark:text-blue-300 dark:border-blue-700 dark:hover:bg-blue-800 dark:hover:bg-opacity-40',
  green: 'bg-green-100 text-green-800 border-green-200 hover:bg-green-200 hover:border-green-300 dark:bg-green-900 dark:bg-opacity-30 dark:text-green-300 dark:border-green-700 dark:hover:bg-green-800 dark:hover:bg-opacity-40',
  purple: 'bg-purple-100 text-purple-800 border-purple-200 hover:bg-purple-200 hover:border-purple-300 dark:bg-purple-900 dark:bg-opacity-30 dark:text-purple-300 dark:border-purple-700 dark:hover:bg-purple-800 dark:hover:bg-opacity-40',
  red: 'bg-red-100 text-red-800 border-red-200 hover:bg-red-200 hover:border-red-300 dark:bg-red-900 dark:bg-opacity-30 dark:text-red-300 dark:border-red-700 dark:hover:bg-red-800 dark:hover:bg-opacity-40',
  yellow: 'bg-yellow-100 text-yellow-800 border-yellow-200 hover:bg-yellow-200 hover:border-yellow-300 dark:bg-yellow-900 dark:bg-opacity-30 dark:text-yellow-300 dark:border-yellow-700 dark:hover:bg-yellow-800 dark:hover:bg-opacity-40',
  orange: 'bg-orange-100 text-orange-800 border-orange-200 hover:bg-orange-200 hover:border-orange-300 dark:bg-orange-900 dark:bg-opacity-30 dark:text-orange-300 dark:border-orange-700 dark:hover:bg-orange-800 dark:hover:bg-opacity-40',
};

// Level indicators
const levelClasses = {
  Beginner: 'opacity-60',
  Intermediate: 'opacity-75',
  Advanced: 'opacity-90',
  Expert: 'opacity-100 font-medium',
};

const colorClass = colorClasses[color as keyof typeof colorClasses] || colorClasses.blue;
const levelClass = levelClasses[level];
---

<div 
  class={`
    skill-badge inline-flex items-center justify-center w-full px-2 sm:px-3 py-2 sm:py-1.5 rounded-lg text-xs sm:text-sm font-medium
    border transition-all duration-300 ease-out
    transform hover:scale-105 hover:shadow-lg hover:-translate-y-0.5
    cursor-default select-none min-h-[36px] sm:min-h-[32px] touch-manipulation
    ${colorClass} ${levelClass}
  `}
  style={`animation-delay: ${index * 50}ms`}
  data-skill={name}
  data-level={level}
>
  <span class="skill-name text-center leading-tight">{name}</span>
  <span class="skill-level ml-1 sm:ml-2 text-xs opacity-75 font-normal hidden sm:inline">
    {level}
  </span>
</div>

<style>
  .skill-badge {
    opacity: 0;
    transform: translateY(20px) scale(0.95);
    animation: slideInUp 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
    position: relative;
    overflow: hidden;
  }

  .skill-badge::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.5s ease-in-out;
  }

  .skill-badge:hover::before {
    left: 100%;
  }

  @keyframes slideInUp {
    0% {
      opacity: 0;
      transform: translateY(20px) scale(0.95);
    }
    60% {
      opacity: 0.8;
      transform: translateY(-2px) scale(1.02);
    }
    100% {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  .skill-badge:hover {
    transform: translateY(-2px) scale(1.05);
    box-shadow: 
      0 10px 25px -5px rgba(0, 0, 0, 0.15), 
      0 10px 10px -5px rgba(0, 0, 0, 0.08),
      0 0 0 1px rgba(255, 255, 255, 0.1);
    z-index: 10;
  }

  .skill-badge:active {
    transform: translateY(0) scale(0.98);
    transition-duration: 0.1s;
  }

  /* Glow effect based on skill level */
  .skill-badge[data-level="Expert"]:hover {
    box-shadow: 
      0 10px 25px -5px rgba(34, 197, 94, 0.3), 
      0 10px 10px -5px rgba(34, 197, 94, 0.15),
      0 0 0 1px rgba(34, 197, 94, 0.2);
  }

  .skill-badge[data-level="Advanced"]:hover {
    box-shadow: 
      0 10px 25px -5px rgba(59, 130, 246, 0.3), 
      0 10px 10px -5px rgba(59, 130, 246, 0.15),
      0 0 0 1px rgba(59, 130, 246, 0.2);
  }

  .skill-badge[data-level="Intermediate"]:hover {
    box-shadow: 
      0 10px 25px -5px rgba(245, 158, 11, 0.3), 
      0 10px 10px -5px rgba(245, 158, 11, 0.15),
      0 0 0 1px rgba(245, 158, 11, 0.2);
  }

  /* Respect reduced motion preferences */
  @media (prefers-reduced-motion: reduce) {
    .skill-badge {
      animation: fadeInSimple 0.3s ease-out forwards;
    }
    
    .skill-badge::before {
      display: none;
    }
    
    .skill-badge:hover {
      transform: none;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    }

    @keyframes fadeInSimple {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }
  }

  /* Dark mode enhancements */
  .dark .skill-badge:hover {
    box-shadow: 
      0 10px 25px -5px rgba(0, 0, 0, 0.4), 
      0 10px 10px -5px rgba(0, 0, 0, 0.2),
      0 0 0 1px rgba(255, 255, 255, 0.1);
  }

  .dark .skill-badge[data-level="Expert"]:hover {
    box-shadow: 
      0 10px 25px -5px rgba(34, 197, 94, 0.4), 
      0 10px 10px -5px rgba(34, 197, 94, 0.2),
      0 0 0 1px rgba(34, 197, 94, 0.3);
  }

  .dark .skill-badge[data-level="Advanced"]:hover {
    box-shadow: 
      0 10px 25px -5px rgba(96, 165, 250, 0.4), 
      0 10px 10px -5px rgba(96, 165, 250, 0.2),
      0 0 0 1px rgba(96, 165, 250, 0.3);
  }

  .dark .skill-badge[data-level="Intermediate"]:hover {
    box-shadow: 
      0 10px 25px -5px rgba(251, 191, 36, 0.4), 
      0 10px 10px -5px rgba(251, 191, 36, 0.2),
      0 0 0 1px rgba(251, 191, 36, 0.3);
  }

  /* Focus styles for accessibility */
  .skill-badge:focus-visible {
    outline: 2px solid var(--color-primary, #3b82f6);
    outline-offset: 2px;
    transform: translateY(-2px) scale(1.05);
  }

  /* Pulse animation for expert level skills */
  .skill-badge[data-level="Expert"] {
    animation: slideInUp 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards,
               expertPulse 3s ease-in-out 1s infinite;
  }

  @keyframes expertPulse {
    0%, 100% {
      box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.4);
    }
    50% {
      box-shadow: 0 0 0 4px rgba(34, 197, 94, 0);
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .skill-badge[data-level="Expert"] {
      animation: fadeInSimple 0.3s ease-out forwards;
    }
  }
</style>