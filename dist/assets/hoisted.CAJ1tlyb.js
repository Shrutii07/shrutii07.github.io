function y(t,n={}){const{offset:i=80,duration:o=800}=n;let e;if(typeof t=="string"?e=document.querySelector(t):e=t,!e)return;const c=e.getBoundingClientRect().top+window.pageYOffset-i,a=window.pageYOffset,d=c-a;let s=null;function l(r){s===null&&(s=r);const m=r-s,u=Math.min(m/o,1),f=u<.5?2*u*u:1-Math.pow(-2*u+2,2)/2;window.scrollTo(0,a+d*f),m<o&&requestAnimationFrame(l)}requestAnimationFrame(l)}function b(){const t=["hero","skills","projects","publications","experience","contact"],n=window.scrollY+100;for(let i=t.length-1;i>=0;i--){const o=document.getElementById(t[i]);if(o&&o.offsetTop<=n)return t[i]}return"hero"}function k(t){document.querySelectorAll(".nav-link").forEach(o=>{o.getAttribute("data-section")===t?o.classList.add("active"):o.classList.remove("active")}),document.querySelectorAll(".mobile-nav-link").forEach(o=>{o.getAttribute("data-section")===t?o.classList.add("active"):o.classList.remove("active")})}function S(){document.querySelectorAll(".nav-link, .mobile-nav-link").forEach(e=>{e.addEventListener("click",c=>{c.preventDefault();const a=e.getAttribute("href");a&&a.startsWith("#")&&(y(a),history.pushState&&history.pushState(null,"",a))})});let n=!1;function i(){n||(requestAnimationFrame(()=>{const e=b();e&&k(e),n=!1}),n=!0)}window.addEventListener("scroll",i,{passive:!0});const o=b();o&&k(o),window.addEventListener("popstate",()=>{const e=window.location.hash;e&&y(e)}),window.location.hash&&setTimeout(()=>{y(window.location.hash)},100)}function A(){const t=document.getElementById("header");if(!t)return;let n=!1;function i(){if(!t)return;window.scrollY>10?t.classList.add("shadow-md"):t.classList.remove("shadow-md"),n=!1}function o(){n||(requestAnimationFrame(i),n=!0)}window.addEventListener("scroll",o,{passive:!0}),i()}function w(){S(),A()}function C(){const t=document.getElementById("mobile-menu-button"),n=document.getElementById("mobile-menu"),i=document.getElementById("hamburger-icon"),o=document.getElementById("close-icon");if(!t||!n||!i||!o)return;let e=!1;function c(){!n||!i||!o||!t||(e=!e,e?(n.style.maxHeight=n.scrollHeight+"px",n.classList.remove("opacity-0"),n.classList.add("opacity-100"),i.classList.add("hidden"),o.classList.remove("hidden"),t.setAttribute("aria-expanded","true")):(n.style.maxHeight="0",n.classList.remove("opacity-100"),n.classList.add("opacity-0"),i.classList.remove("hidden"),o.classList.add("hidden"),t.setAttribute("aria-expanded","false")))}t.addEventListener("click",c),document.querySelectorAll(".mobile-nav-link").forEach(d=>{d.addEventListener("click",()=>{e&&c()})}),document.addEventListener("click",d=>{e&&!t.contains(d.target)&&!n.contains(d.target)&&c()}),document.addEventListener("keydown",d=>{d.key==="Escape"&&e&&c()})}function E(){C(),w()}document.addEventListener("DOMContentLoaded",E);document.readyState==="loading"?document.addEventListener("DOMContentLoaded",E):E();function v(){const t=document.querySelector(".typewriter");if(!t||t.dataset.initialized==="true")return;t.dataset.initialized="true";const n=t.getAttribute("data-text")||"";if(window.matchMedia("(prefers-reduced-motion: reduce)").matches){t.textContent=n,t.style.borderRight="none";return}t.innerHTML="",t.textContent="";let i=0;const o=60;function e(){i<n.length&&t?(t.textContent=n.substring(0,i+1),i++,setTimeout(e,o)):setTimeout(()=>{t&&(t.style.borderRight="none")},500)}setTimeout(e,200)}function L(){const t=document.querySelector(".hero-profile-image");t&&t.addEventListener("error",()=>{t.src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=400&fit=crop&crop=face"})}document.addEventListener("DOMContentLoaded",()=>{v(),L()});document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{v(),L()}):(v(),L());document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll('a[href^="#"]').forEach(n=>{n.addEventListener("click",i=>{i.preventDefault();const o=n.getAttribute("href")?.substring(1),e=document.getElementById(o||"");e&&e.scrollIntoView({behavior:"smooth",block:"start"})})})});if(typeof window<"u"){let t=function(){const a=document.querySelectorAll(".skill-badge");Array.from(a).sort(()=>.5-Math.random()).slice(0,Math.min(5,a.length)).forEach((s,l)=>{const r=s;setTimeout(()=>{r.classList.add("floating")},l*500)})},n=function(){document.querySelectorAll(".skill-category").forEach(d=>{const s=d,l=s.querySelectorAll(".skill-badge");s.addEventListener("mouseenter",()=>{l.forEach((r,m)=>{const u=r;setTimeout(()=>{u.style.transform="translateY(-2px) scale(1.02)"},m*20)})}),s.addEventListener("mouseleave",()=>{l.forEach(r=>{const m=r;m.style.transform=""})})})};const i={threshold:.2,rootMargin:"0px 0px -100px 0px"};let o=!1;const e=new IntersectionObserver(a=>{a.forEach(d=>{if(d.isIntersecting&&!o){o=!0;const s=d.target,l=s.querySelector(".section-header");l&&l.classList.add("animate-in"),s.querySelectorAll(".skill-category").forEach((m,u)=>{const f=m;setTimeout(()=>{f.classList.add("animate-in"),f.querySelectorAll(".skill-badge").forEach((h,g)=>{const x=h;setTimeout(()=>{x.style.animationDelay=`${g*50}ms`,x.classList.add("animate-in")},g*30)})},u*300)}),setTimeout(()=>{t()},2e3)}})},i);document.addEventListener("DOMContentLoaded",()=>{const a=document.getElementById("skills");a&&(e.observe(a),n()),document.querySelectorAll(".skill-badge").forEach(s=>{s.setAttribute("tabindex","0"),s.setAttribute("role","button"),s.setAttribute("aria-label",`${s.getAttribute("data-skill")} - ${s.getAttribute("data-level")} level`)})}),window.addEventListener("beforeunload",()=>{e.disconnect()});const c=document.createElement("style");c.textContent=`
      .floating {
        animation: float 3s ease-in-out infinite;
      }
      
      @keyframes float {
        0%, 100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-5px);
        }
      }
      
      .animate-in {
        animation-play-state: running !important;
      }
      
      @media (prefers-reduced-motion: reduce) {
        .floating {
          animation: none;
        }
      }
    `,document.head.appendChild(c)}document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector(".view-all-btn"),n=document.querySelector(".additional-projects"),i=document.querySelector(".btn-text");if(t&&n&&i){const o=n,e=document.querySelectorAll(".projects-grid .project-card").length;t.addEventListener("click",()=>{t.getAttribute("aria-expanded")==="true"?(o.style.maxHeight=o.scrollHeight+"px",o.offsetHeight,o.style.maxHeight="0px",o.classList.remove("expanded"),t.setAttribute("aria-expanded","false"),i.textContent=`View All Projects (${e})`):(o.style.maxHeight=o.scrollHeight+"px",o.classList.add("expanded"),t.setAttribute("aria-expanded","true"),i.textContent="Show Less",setTimeout(()=>{t.getAttribute("aria-expanded")==="true"&&(o.style.maxHeight="none")},500))})}});if(typeof window<"u"){let t=function(){document.querySelectorAll(".project-image").forEach(l=>{const r=l;r.addEventListener("loadstart",()=>{r.style.opacity="0.5"}),r.addEventListener("load",()=>{r.style.opacity="1"}),r.addEventListener("error",()=>{const m="//test-image.png";r.src!==m&&(r.src=m)})})},n=function(){document.querySelectorAll(".project-image").forEach((l,r)=>{if(r<3){const m=l,u=document.createElement("link");u.rel="preload",u.as="image",u.href=m.src,document.head.appendChild(u)}})},i=function(){document.addEventListener("keydown",s=>{s.ctrlKey&&s.key==="r"&&document.getElementById("projects")?.contains(document.activeElement)&&(s.preventDefault(),console.log("Refreshing projects content..."),window.location.reload())})},o=function(){document.querySelectorAll(".project-card a").forEach(l=>{l.addEventListener("click",r=>{const u=r.target.closest(".project-card")?.querySelector("h3")?.textContent,f=l.textContent?.includes("Code")?"github":"demo";console.log(`Project interaction: ${u} - ${f}`)})})},e=function(){document.querySelectorAll(".project-card").forEach(l=>{const r=l,m=r.querySelector("img"),u=r.querySelectorAll("a");m&&m.addEventListener("error",()=>{console.warn(`Failed to load image for project: ${r.querySelector("h3")?.textContent}`)}),u.forEach(f=>{const p=f.getAttribute("href");p&&p.startsWith("http")})})};const c={threshold:.1,rootMargin:"0px 0px -50px 0px"};let a=!1;const d=new IntersectionObserver(s=>{s.forEach(l=>{if(l.isIntersecting&&!a){a=!0;const r=l.target,m=r.querySelector(".section-header");m&&m.classList.add("animate-in");const u=r.querySelector(".projects-grid");u&&setTimeout(()=>{u.classList.add("animate-in")},200),r.querySelectorAll(".project-card").forEach((p,h)=>{const g=p;setTimeout(()=>{g.style.animationDelay=`${h*150}ms`,g.classList.add("animate-in")},400+h*100)})}})},c);if(document.addEventListener("DOMContentLoaded",()=>{const s=document.getElementById("projects");s&&(d.observe(s),t())}),window.addEventListener("beforeunload",()=>{d.disconnect()}),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{n()}):n(),document.addEventListener("DOMContentLoaded",()=>{i(),o(),e()}),window.matchMedia("(prefers-reduced-motion: reduce)").matches){const s=document.createElement("style");s.textContent=`
        .magnetic { transition: none !important; }
        .project-card:hover { transform: none !important; }
      `,document.head.appendChild(s)}}document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".abstract-toggle").forEach(n=>{const i=n.parentElement?.querySelector(".abstract-content"),o=n.querySelector(".abstract-icon");if(i&&o){const e=i,c=o;e.style.maxHeight="0px",e.style.opacity="0",e.style.paddingTop="0px",e.style.paddingBottom="0px",n.addEventListener("click",()=>{n.getAttribute("aria-expanded")==="true"?(e.style.maxHeight=e.scrollHeight+"px",e.offsetHeight,e.style.maxHeight="0px",e.style.opacity="0",e.style.paddingTop="0px",e.style.paddingBottom="0px",n.setAttribute("aria-expanded","false"),c.style.transform="rotate(0deg)"):(e.style.maxHeight=e.scrollHeight+"px",e.style.opacity="1",e.style.paddingTop="0px",e.style.paddingBottom="0.5rem",n.setAttribute("aria-expanded","true"),c.style.transform="rotate(180deg)",setTimeout(()=>{n.getAttribute("aria-expanded")==="true"&&(e.style.maxHeight="none")},400))})}})});document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".achievements-toggle").forEach(i=>{const e=i.closest(".achievements-container")?.querySelector(".additional-achievements"),c=i.querySelector(".toggle-text");if(e&&c){const a=e,d=a.children.length;i.addEventListener("click",()=>{i.getAttribute("aria-expanded")==="true"?(a.style.maxHeight=a.scrollHeight+"px",a.offsetHeight,a.style.maxHeight="0px",a.classList.remove("expanded"),i.setAttribute("aria-expanded","false"),c.textContent=`+${d} more achievements`):(a.style.maxHeight=a.scrollHeight+"px",a.classList.add("expanded"),i.setAttribute("aria-expanded","true"),c.textContent="Show less",setTimeout(()=>{i.getAttribute("aria-expanded")==="true"&&(a.style.maxHeight="none")},300))})}});const n=document.querySelector('.cta-section a[href="#contact"]');n&&n.addEventListener("click",i=>{i.preventDefault();const o=document.getElementById("contact");o&&o.scrollIntoView({behavior:"smooth",block:"start"})})});(function(){function t(){const n=document.getElementById("theme-toggle");if(!n)return;function i(){const o=document.documentElement;o.classList.contains("dark")?(o.classList.remove("dark"),localStorage.setItem("theme","light")):(o.classList.add("dark"),localStorage.setItem("theme","dark"))}n.addEventListener("click",i)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",t):t()})();document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".description-text").forEach(n=>{const o=n.closest(".description-container")?.querySelector(".read-more-btn");if(n&&o){const e=n,c=o;e.scrollHeight>e.clientHeight&&c.classList.remove("hidden"),e.addEventListener("click",()=>{e.classList.contains("expanded")?(e.classList.remove("expanded"),c.textContent="Read more"):(e.classList.add("expanded"),c.textContent="Read less")}),c.addEventListener("click",d=>{d.stopPropagation(),e.click()})}})});
